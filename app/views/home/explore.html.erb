<div id="explore">
  <div class="exploreRow">
    <div class="exploreTopStreamerColumn">
      <h5> Top Streamers</h5>
      <% @topDJ.each_with_index do |a, index| %>
        <div class="exploreTopStreamerBox">
          <div class="exploreTopStreamerColumnColumn">
            <p style="margin-bottom: 0;">Edward Sotelo Jr</p>
            <p style="margin-bottom: 0;">@edwardsotelojr</p>
              <img src="default-avatar.jpg" class="exploreTopStreamerAva">
            <p style="margin-bottom: 0;">Houston, Tx</p>
          </div>
          <div class="exploreTopStreamerColumnColumn">
            <h1><%= index +1 %></h1>
          </div>
          <!%= image_tag url_for(a.broadcast_cover), style: "width:130px; height:130px" %>

        </div>
      <% end %>
    </div>
    <div class="exploreTopSongColumn">
      <h5> Top songs in </h5>
      <% @topDJ.each_with_index do |a, index| %>
        <div class="exploreTopSongBox">
          <p style="margin-bottom: 0;">Title</p>
          <img src="default-avatar.jpg" class="exploreTopSongCover">
          <img src="default-avatar.jpg" class="exploreTopSongAva">
          <p>@FeaturedArtist</p>
          <img src="default-avatar.jpg" class="exploreTopSongAva">
          <p>@FeaturedArtist1</p>
          <img src="default-avatar.jpg" class="exploreTopSongAlbumCover">
          <p>Album/Playlist Name</p>
          <img src="default-avatar.jpg" class="exploreTopSongAva">
          <p>@Artist</p>


          <!%= image_tag url_for(a.broadcast_cover), style: "width:130px; height:130px" %>

        </div>
      <% end %>
    </div>
    <div class="exploreTopSongColumn">
      <h5> Top Songs in </h5>
      <% @topDJ.each_with_index do |a, index| %>
        <div class="exploreTopSongBox">
          <div class="exploreTopSongColumnColumn">

          </div>
          <div class="exploreTopSongColumnColumn">
            <h1><%= index +1 %></h1>
          </div>
          <!%= image_tag url_for(a.broadcast_cover), style: "width:130px; height:130px" %>

        </div>
      <% end %>
    </div>
    <div class="exploreTopSongColumn">
      <h5> Top DJ's</h5>
      <% @topDJ.each_with_index do |a, index| %>
        <div class="exploreTopSongBox">
          <div class="exploreTopSongColumnColumn">

          </div>
          <div class="exploreTopSongColumnColumn">
            <h1><%= index +1 %></h1>
          </div>
          <!%= image_tag url_for(a.broadcast_cover), style: "width:130px; height:130px" %>

        </div>
      <% end %>
    </div>
    <div class="exploreTopSongColumn">
      <h5> Top DJ's</h5>
      <% @topDJ.each_with_index do |a, index| %>
        <div class="exploreTopSongBox">
          <div class="exploreTopSongColumnColumn">

          </div>
          <div class="exploreTopSongColumnColumn">
            <h1><%= index +1 %></h1>
          </div>
          <!%= image_tag url_for(a.broadcast_cover), style: "width:130px; height:130px" %>

        </div>
      <% end %>
    </div>
  </div>
</div>
<script>

    $("#genre_value").change(function () {
        let text = $(this).children("option:selected").val();
        Rails.ajax({
            url: "/topSong?genre=" + text.trim(),
            type: "get",
            processData: false,
            success: function (song) {
                if (parseInt(song.id) === -1) {
                    $("#top_song_pic").empty();
                    $("#top_song_details").empty();
                    $("#top_song_details").append("<h2>No top chart yet!</h2>")
                } else {
                    $("#top_song_pic").empty();
                    $("#top_song_details").empty();
                    let button = document.createElement("button");
                    button.setAttribute("class", "playButton");
                    console.log(song.song_file)
                    button.addEventListener('click', event => {
                        SelectedSong(this, String(song.name), String(song.username), String(song.title), true, parseInt(song.id), String(song.song_file), String(song.cover));
                        incrementPlays(parseInt(song.id), parseInt(song.user_id))
                    });
                    let img = document.createElement("img");
                    img.setAttribute("src", song.cover);
                    img.setAttribute("class", "playButtonImage");
                    button.appendChild(img);
                    let title = document.createElement("p");
                    title.appendChild(document.createTextNode(song.title));
                    let name = document.createElement("p");
                    name.appendChild(document.createTextNode(song.name));
                    $("#top_song_pic").append(button);
                    $("#top_song_details").append(name);
                    $("#top_song_details").append(title);
                }
            },
            error: function (e) {
                console.log(e);
            }
        })
    });
</script>
